<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="utf-8">
    <meta name="description" content="네이버 예약, 네이버 예약이 연동된 곳 어디서나 바로 예약하고, 네이버 예약 홈(나의예약)에서 모두 관리할 수 있습니다.">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no">
    <title>네이버 예약</title>
    <link href="resources/css/style.css" rel="stylesheet">

  <script type="text/javascript" src="//code.jquery.com/jquery-latest.min.js"></script>
  <script type="text/javascript" >
  $(function () {

      var num = 1;
      var slide_width = $('.visual_img > li').outerWidth();
      var slide_count = $('.visual_img > li').length;
      var auto = true;
      var event_num = 0;
      var cur_display_num = 0;
      var cat_num = 0;
      var SETTIMEOUT;
      var SETINTERVAL;
      var isLogin = 1;

      if(auto) SETINTERVAL = setInterval(autoRightMove, 2000);

      getList();
      getMorelistAll(0);

          $(document).on('click',".nxt_e" ,function() {

            clearInterval(SETINTERVAL);
            clearTimeout(SETTIMEOUT);
            SETTIMEOUT = setTimeout(goInterval,4000);

               if(num!=slide_count)
               {
                $( ".visual_img" ).animate({ "left": "-="+slide_width+"px" }, "slow" );
                num++;
               }
            });

          $(document).on('click', ".prev_e" ,function() {

            clearInterval(SETINTERVAL);
            clearTimeout(SETTIMEOUT);
            SETTIMEOUT = setTimeout(goInterval,4000);

              if(num!=1)
              {
               $( ".visual_img" ).animate({ "left": "+="+slide_width+"px" }, "slow" );
               num--;
              }
            });

           $(document).on('mouseenter', ".movebtn" ,function() {

                 if(!auto) return false;
                 clearInterval(SETINTERVAL);

                 auto = false;

                  if(SETTIMEOUT==null){
                   SETTIMEOUT = setTimeout(goInterval,4000);
                  }

             });

            function goInterval(){

              clearTimeout(SETTIMEOUT);
              SETTIMEOUT = null;
              SETINTERVAL = setInterval(autoRightMove, 2000);
              auto = true;
            }

            function autoRightMove(){

                if(num>slide_count-1){

                  num = 0;
                }

                $( ".visual_img" ).animate({'left': -(num*slide_width)+'px' },'normal');

                num++;
            }

             $(document).on('click','.more',function(){

               if(cat_num==0){

                 getMorelistAll(cur_display_num);
               }else{

                 getMorelistCategory(cur_display_num,cat_num);
               }
             });



      $(document).on('click', ".section_event_tab ul li" ,function(){

        $('.section_event_tab ul li').children().removeClass('active'); //

        $(this).children().addClass('anchor active'); //
        
        $('.lst_event_box li').remove();

        cur_display_num = 0;

        cat_num = $(this).data('category');

        if(cat_num == 0){

          getMorelistAll(cur_display_num);
        }else{

          getMorelistCategory(cur_display_num,cat_num);
        }

      });

      function getList(){

        $.ajax({
         url: "./categories",
         type: "GET",
         contentType:"application/json; charset=UTF-8",
         dataType:"json",
         success: function(data) {
            for(var i = 0 ; i < data.length-1 ; i++)
              addElementLi(data[i].name,data[i].id);

              addElementLiLast(data[data.length-1].name,data[data.length-1].id);
         }
        });
       }

       function addElementLi(name,id) {

  		  $(".section_event_tab ul").show();
  		  var $element_ul = parent.$(".section_event_tab ul");
  		  $('<li class="item" data-category='+id+'>'
  		  +'<a class="anchor"> <span>'+name+'</span> </a>'
  		  + "</li>").appendTo($element_ul);
  		  }

        function addElementLiLast(name,id) {

   		  $(".section_event_tab ul").show();
   		  var $element_ul = parent.$(".section_event_tab ul");
   		  $('<li class="item" data-category='+id+'>'
   		  +'<a class="anchor last"> <span>'+name+'</span> </a>'
   		  + "</li>").appendTo($element_ul);
   		  }

        function getMorelistCategory(start,id){

          $.ajax({
           url: "./products/"+start+"/"+id,
           type: "GET",
           contentType:"application/json; charset=UTF-8",
           dataType:"json",
           success: function(data){

             for(var i in data.product){
               if(i%2==0){
                leftUlAddLi(data.product[i].name,data.product[i].place_name,data.product[i].description);
               }
               else {
                rightUlAddLi(data.product[i].name,data.product[i].place_name,data.product[i].description);
               }
             }

             cur_display_num+= 10;
             event_num = data.count;
             showProductNum(event_num);
           }
          });
        }

        function getMorelistAll(start){

          $.ajax({
           url: "./products/"+start,
           type: "GET",
           contentType:"application/json; charset=UTF-8",
           dataType:"json",
           success: function(data){

             for(var i in data.product){

               if(i%2==0){

                leftUlAddLi(data.product[i].name,data.product[i].place_name,data.product[i].description);
               }else {

                rightUlAddLi(data.product[i].name,data.product[i].place_name,data.product[i].description);
               }
             }

             cur_display_num+= 10;
             event_num = data.count;
             showProductNum(event_num);

           }
          });
        }

        function showProductNum(num){

          $('.pink').text(num+'개');
        }

        function rightUlAddLi(name,place,desc){

          $("#right_ul").show();
          var $element_ul = parent.$("#right_ul");
          /*
          $('<li class="item" ><a href="#" class="item_book"><div class="item_preview"> <img alt="" class="" src=""><span class="img_border"></span> </div><div class="event_txt"><h4 class="event_txt_tit"> <span></span> <small class="sm"></small> </h4><p class="event_txt_dsc"></p></div></a></li>').appendTo($element_ul);
          */
          $('<li class="item">'
          +'<a href="#" class="item_book">'
          +'<div class="item_preview"> <img alt="'+name+'" class="img_thumb" src="https://ssl.phinf.net/naverbooking/20170111_225/1484116579024rNkXW_JPEG/2016_%B9%C2%C1%F6%C4%C3_%C0%CE_%B4%F5_%C7%CF%C0%CC%C3%F7_%C6%F7%BD%BA%C5%CD%2820MB%29.jpg?type=l591_945"><span class="img_border"></span> </div>'
          +'<div class="event_txt">'
          +'<h4 class="event_txt_tit"> <span>'+name+'</span> <small class="sm">'+place+'</small> </h4>'
          +'<p class="event_txt_dsc">'+desc+'</p>'
          +'</div>'
          +'</a>'
          +'</li>').appendTo($element_ul);
        }

        function leftUlAddLi(name,place,desc){

          $("#left_ul").show();
          var $element_ul = parent.$("#left_ul");
          /*
          $('<li class="item" ><a href="#" class="item_book"><div class="item_preview"> <img alt="" class="" src=""><span class="img_border"></span> </div><div class="event_txt"><h4 class="event_txt_tit"> <span></span> <small class="sm"></small> </h4><p class="event_txt_dsc"></p></div></a></li>').appendTo($element_ul);
          */
          $('<li class="item">'
          +'<a href="#" class="item_book">'
          +'<div class="item_preview"> <img alt="'+name+'" class="img_thumb" src="https://ssl.phinf.net/naverbooking/20170111_225/1484116579024rNkXW_JPEG/2016_%B9%C2%C1%F6%C4%C3_%C0%CE_%B4%F5_%C7%CF%C0%CC%C3%F7_%C6%F7%BD%BA%C5%CD%2820MB%29.jpg?type=l591_945"><span class="img_border"></span> </div>'
          +'<div class="event_txt">'
          +'<h4 class="event_txt_tit"> <span>'+name+'</span> <small class="sm">'+place+'</small> </h4>'
          +'<p class="event_txt_dsc">'+desc+'</p>'
          +'</div>'
          +'</a>'
          +'</li>').appendTo($element_ul);
        }

    });
  </script>

</head>

<body>
    <div id="container">
        <div class="header">
            <header class="header_tit">
                <h1 class="logo">
                    <a href="/" class="lnk_logo" title="네이버"> <span class="spr_bi ico_n_logo">네이버</span> </a>
                    <a href="/" class="lnk_logo" title="예약"> <span class="spr_bi ico_bk_logo">예약</span> </a>
                </h1>
                <a href="/login" class="btn_my"> <span title="내 예약">MY</span> </a>
            </header>
        </div>
        <hr>
        <div class="event">
            <div class="section_visual">
                <div class="group_visual">
                  <div class="container_visual" >
                    <div class = "movebtn">
                    <div class="prev_e">
                        <div class="prev_inn">
                            <a href="#" class="btn_pre_e" title="이전"> <i class="spr_book_event spr_event_pre">이전</i> </a>
                        </div>
                    </div>

                    <div class="nxt_e">
                        <div class="nxt_inn">
                            <a href="#" class="btn_nxt_e" title="다음"> <i class="spr_book_event spr_event_nxt">다음</i> </a>
                        </div>
                    </div>
                  </div>
                        <div>
                            <div class="container_visual" >
                                <!-- [D] 이전,다음 버튼을 클릭할때마다 캐러셀 형태로 순환 됨 --->
                                <ul  class="visual_img">
                                    <li class="item" style="background-image: url(http://naverbooking.phinf.naver.net/20170209_66/1486628146913la6nC_JPEG/image.jpg); width: 338px;">
                                        <a href="#"> <span class="img_btm_border"></span> <span class="img_right_border"></span> <span class="img_bg_gra"></span>
                                            <div class="event_txt">
                                                <h4 class="event_txt_tit"></h4>
                                                <p class="event_txt_adr"></p>
                                                <p class="event_txt_dsc"></p>
                                            </div>
                                        </a>
                                    </li>
                                    <li class="item" style="background-image: url(http://naverbooking.phinf.naver.net/20170119_48/1484802596907hmVDm_JPEG/image.jpg); width: 338px;">
                                        <a href="#"> <span class="img_btm_border"></span> <span class="img_right_border"></span> <span class="img_bg_gra"></span>
                                            <div class="event_txt">
                                                <h4 class="event_txt_tit">뮤지컬-김종욱찾기 네이버 예약</h4>
                                                <p class="event_txt_adr">대학로 쁘띠첼씨어터</p>
                                                <p class="event_txt_dsc">네이버 예매시, 손크림/발크림(중 래덤)을 드립니다</p>
                                            </div>
                                        </a>
                                    </li>
                                    <li class="item" style="background-image: url(http://naverbooking.phinf.naver.net/20170209_66/1486628146913la6nC_JPEG/image.jpg); width: 338px;">
                                        <a href="#"> <span class="img_btm_border"></span> <span class="img_right_border"></span> <span class="img_bg_gra"></span>
                                            <div class="event_txt">
                                                <h4 class="event_txt_tit"></h4>
                                                <p class="event_txt_adr"></p>
                                                <p class="event_txt_dsc"></p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                          </div>

                            </div>
                            <span class="nxt_fix"></span>
                        </div>

                </div>
            </div>

            <div class="section_event_tab" >
                <ul class="event_tab_lst tab_lst_min" style="overflow:scroll">
                    <li class="item" data-category="0">
                        <a class="anchor active"> <span>전체</span> </a>
                    </li>

                </ul>
            </div>

            <div class="section_event_lst">
                <p class="event_lst_txt">바로 예매 가능한 전시, 공연, 행사가 <span class="pink">40개</span> 있습니다</p>
                <div class="wrap_event_box">
                    <!-- [D] lst_event_box 가 2컬럼으로 좌우로 나뉨, 더보기를 클릭할때마다 좌우 ul에 li가 추가됨 -->
                    <ul id="left_ul" class="lst_event_box">

                    </ul>
                    <ul id="right_ul" class="lst_event_box">

                    </ul>

                    <!-- 더보기 -->
                    <div class="more">
                        <button class="btn"><span>더보기</span></button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="gototop">
            <a href="#" class="lnk_top"> <span class="lnk_top_text">TOP</span> </a>
        </div>
        <div class="footer">
            <p class="dsc_footer">네이버(주)는 통신판매의 당사자가 아니며, 상품의정보, 거래조건, 이용 및 환불 등과 관련한 의무와 책임은 각 회원에게 있습니다.</p>
            <span class="copyright">© NAVER Corp.</span>
        </div>
    </footer>

</body>

</html>
